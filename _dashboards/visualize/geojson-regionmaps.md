---
layout: default
title: 使用坐标和区域图
parent: 构建数据可视化
has_children: true
nav_order: 15
redirect_from:
  - /dashboards/geojson-regionmaps/
---

# 使用坐标和区域图

OpenSearch具有一组标准的Geojson文件，可为每个区域映射提供矢量图。OpenSearch仪表板还提供了基本的地图图块，并提供标准向量图来创建区域地图。您可以使用[网络地图服务（WMS）](https://www.ogc.org/standards/wms)。有关更多信息，请参阅[在OpenSearch仪表板中配置WMS]({{site.url}}{{site.baseurl}}/dashboards/maptiles/)。

对于空隙环境，OpenSearch仪表板提供了自我-主机地图服务器。有关更多信息，请参阅[使用自我-主机地图服务器]({{site.url}}{{site.baseurl}}/dashboards/selfhost-maps-server/)

虽然您无法配置服务器来支持用户-定义的矢量图层，您可以配置自己的Geojson文件并为此目的上传。
{:.note}

## 使用Geojson自定义向量图

如果您具有OpenSearch Dashboards向量图（例如美国县或美国邮政编码）未提供的特定环境，则可以使用Geojson文件创建自己的自定义矢量图。要创建自定义区域图，您将定义一个地理形状，例如具有多个坐标的多边形。要了解有关支持自定义区域地图位置的各种地理形状的更多信息，请参见[Geoshape字段类型]({{site.url}}{{site.baseurl}}/opensearch/supported-field-types/geo-shape/)。

Geojson格式允许您编码地理数据结构。要了解有关Geojson规范的更多信息，请转到[geojson.org](https://geojson.org/)。

您可以使用[geojson.io](https://geojson.io/#map=2/20.0/0.0) 提取Geojson文件。

>   **先决条件**
>   要使用Geojson使用自定义矢量映射，请安装这两个必需的插件：
>   * OpenSearch仪表板地图[`dashboards-maps`](https://github.com/opensearch-project/dashboards-maps) 正面-结束插件
>   * OpenSearch[`geospatial`](https://github.com/opensearch-project/geospatial) 后端插件
{:.note}

### 步骤1：创建区域图可视化

要创建您自己的自定义向量图，请上传一个JSON文件，该文件包含定制区域地图的地理数据。JSON文件包含可视化的矢量层。

1. 准备一个JSON文件以上传。确保文件具有.geojson或.json扩展名。
1. 在顶部菜单栏上，转到**OpenSearch仪表板>可视化**。
1. 选择**创建可视化** 按钮。
1. 选择**区域图**。
1. 选择一个来源。例如，**[航班]航班日志**。
1. 在右面板中，选择**导入向量图**。
1. 在**上传地图**，选择或拖放JSON文件，然后输入**地图名称前缀** （例如，`usa-counties`）。您的地图将具有您定义的前缀，然后是`-map` 后缀（例如，`usa-counties-map`），如下图所示：

   <img src ="{{site.url}}{{site.baseurl}}/images/dashboards/import-geojson-file.png" alt ="Importing a GeoJSON file" width="300"/>

1. 选择**导入文件** 按钮，然后选择**刷新** 流行中的按钮-向上窗口确认成功上传，如下图所示。
  
  <img src ="{{site.url}}{{site.baseurl}}/images/dashboards/upload-success.png" alt ="Message confirming successful file upload" width="300"/>

### 步骤2：在OpenSearch仪表板中查看自定义区域图

上传自定义Geojson文件后，您需要将矢量映射层设置为自定义，然后选择矢量映射：

1. 从**图层选项>图层设置**， 选择**自定义向量图**。
1. 在下面**向量图**，选择您刚刚上传的向量图的名称。
1. 可选：下**样式设置**， 增加**边界厚度** 更清楚地看到边界。
1. 选择**更新** 按钮。
1. 在仪表板中查看您的区域图。例如，下图显示了洛杉矶和圣地亚哥县地区：

  <img src ="{{site.url}}{{site.baseurl}}/images/dashboards/county-region-map.png" alt ="Custom GeoJSON region map" width="600"/>

#### 示例Geojson文件

下面的示例Geojson文件提供了两个美国县的坐标。

```json
{
  "type": "FeatureCollection",
  "name": "usa counties",
  "features": [
    { "type": "Feature", "properties": { "iso2": "US", "iso3": "LA-CA", "name": "Los Angeles County", "country": "US", "county": "LA" }, "geometry": { "type": "Polygon", "coordinates":[[[-118.71826171875,34.07086232376631],[-118.69628906249999,34.03445260967645],[-118.56994628906249,34.02990029603907],[-118.487548828125,33.957030069982316],[-118.37219238281249,33.86129311351553],[-118.45458984375,33.75631505992707],[-118.33923339843749,33.715201644740844],[-118.22937011718749,33.75631505992707],[-118.1414794921875,33.678639851675555],[-117.9107666015625,33.578014746143985],[-117.75146484375,33.4955977448657],[-117.55920410156249,33.55512901742288],[-117.3065185546875,33.5963189611327],[-117.0703125,33.67406853374198],[-116.69677734375,34.06176136129718],[-116.9439697265625,34.28445325435288],[-117.18017578125,34.42956713470528],[-117.3779296875,34.542762387234845],[-117.62512207031251,34.56990638085636],[-118.048095703125,34.615126683462194],[-118.44909667968749,34.542762387234845],[-118.61938476562499,34.38877925439021],[-118.740234375,34.21180215769026],[-118.71826171875,34.07086232376631]]] } },
    { "type": "Feature", "properties": { "iso2": "US", "iso3": "SD-CA", "name": "San Diego County", "country": "US", "county": "SD" }, "geometry": { "type": "Polygon", "coordinates":[[[-117.23510742187501,32.861132322810946],[-117.2406005859375,32.75494243654723],[-117.1636962890625,32.68099643258195],[-117.14172363281251,32.58384932565662],[-117.09228515624999,32.46342595776104],[-117.0538330078125,32.29177633471201],[-116.96044921875,32.194208672875384],[-116.85607910156249,32.16631295696736],[-116.6748046875,32.20350534542368],[-116.3671875,32.319633552035214],[-116.1474609375,32.55144352864431],[-116.1639404296875,32.80574473290688],[-116.4111328125,33.073130945006625],[-116.72973632812499,33.08233672856376],[-117.09228515624999,32.99484290420988],[-117.2515869140625,32.96258644191747], [-117.23510742187501,32.861132322810946]]] } }
  ]
}

```


