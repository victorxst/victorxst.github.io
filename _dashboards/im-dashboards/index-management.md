---
layout: default
title: 索引
parent: 索引管理
nav_order: 16
redirect_from:
  - /dashboards/admin-ui-index/index-management/
---

# 索引
引入2.5
{: .label .label-purple }

在里面**索引管理** 部分，您可以执行可用的操作[索引API]({{site.url}}{{site.baseurl}}/api-reference/index-apis/index/)。

## 索引政策

[政策]({{site.url}}{{site.baseurl}}/im-plugin/ism/policies/) 是定义索引可能状态的配置，当索引进入给定状态时要执行的操作以及必须满足的条件以在状态之间过渡：

1. **状态**：索引的可能状态，包括新索引的默认状态。例如，您可能会命名您的状态`hot`，，，，`warm`， 或者`delete`。有关更多信息，请参阅[状态]({{site.url}}{{site.baseurl}}/im-plugin/ism/policies/#states)。
2. **动作**：当索引进入给定状态时，例如执行汇总时，您希望插件采取的任何操作。有关更多信息，请参阅[动作]({{site.url}}{{site.baseurl}}/im-plugin/ism/policies/#actions)。
3. **过渡**：必须满足索引进入新状态必须满足的条件。例如，如果指数超过8周，您可能需要将其移至`delete` 状态。有关更多信息，请参阅[过渡]({{site.url}}{{site.baseurl}}/im-plugin/ism/policies/#transitions)。

您还可以上传JSON文档以指定索引策略。
{: .note}

您在设计政策方面具有完全的灵活性。您可以创建任何状态，过渡到任何其他状态，并在每个状态中指定任何数量的操作。

要将策略附加到索引，请执行以下步骤：

1. 在下面**索引管理**， 选择**索引政策**。
2. 选择要附加策略的索引或索引。
3. 选择**申请政策** 按钮。
4. 来自**政策ID** 菜单，选择您创建的策略。
    查看政策的预览。
5. （可选）：如果您的策略包括翻车操作，请指定翻转别名。确保别名已经存在。有关翻转操作的更多信息，请参阅[滚下]({{site.url}}{{site.baseurl}}/im-plugin/ism/policies#rollover)。
6. 选择**申请** 按钮。

将策略附加到索引之后，索引状态管理（ISM）将创建一个作业，该作业默认情况下每5分钟运行一次，以执行策略操作，检查条件并将索引过渡到不同状态。要更改此作业的默认时间间隔，请参见[设置]({{site.url}}{{site.baseurl}}/im-plugin/ism/settings/)。

如果群集状态为红色，则政策作业不会运行。
{: .note}

## 托管索引

要将策略附加到索引，请执行以下步骤：

1. 在下面**索引管理**， 选择**管理索引**。
2. 选择要附加策略的索引或索引。
3. 选择**更改政策** 按钮。
4. 选择**申请政策** 按钮。

## 索引

这**指数** 部分显示OpenSearch集群中的索引列表。对于每个指数，您都可以看到其健康状况（`green`，，，，`yellow`， 或者`red`），策略（如果索引是由策略管理的），状态，总规模，初级规模，总文件，删除的文档，初选和副本。

以下是三个指数健康状况：

- 绿色：分配了所有主要和复制碎片。
- 黄色：至少没有分配一个复制碎片。
- 红色：至少没有分配一个主碎片。

### 创建索引

虽然可以[创建一个索引]({{site.url}}{{site.baseurl}}/api-reference/index-apis/create-index/) 通过使用文档作为基础，您还可以创建一个空索引供以后使用。

要创建索引，请选择**创建索引** 按钮位于**指数** 部分**索引管理**。然后通过设置以下参数来定义索引：

- 索引名称
- 主要碎片数
- 复制品数量
- 刷新间隔

您还可以使用Visual Editor或JSON编辑器添加字段和对象。

这**高级设置** 允许您上传JSON配置。

### 应用政策

如果分析时间-串联数据，您可能希望优先考虑新数据而不是旧数据。您可能会定期在较旧的索引上执行某些操作，例如减少副本计数或删除它们。

[主义]({{site.url}}{{site.baseurl}}/im-plugin/ism/index/) 是一个插件，可让您根据索引年龄，索引大小或文档数量触发这些定期管理操作来自动化这些定期管理操作。您可以定义自动处理索引翻转或删除以适合您的用例的策略。

例如，您可以定义将您的索引移至一个的策略**只读** 30天后状态，然后在设定的90天后将其删除。您还可以设置策略，以在删除索引时向您发送通知消息。

您可能需要在一定时间后执行索引转盘或运行一个**force_merge** 关闭期间在索引上操作-高峰时间以提高高峰时段的搜索性能。

要应用策略，请选择要应用于该策略的索引**指数** 列表下**索引管理**。然后选择**动作** 按钮并选择**申请政策** 从下拉列表中，如下图所示。

<img src="{{site.url}}{{site.baseurl}}/images/admin-ui-index/apply-policy.PNG" alt="User interface showing apply policy prompt">

### 关闭索引

这[关闭索引]({{site.url}}{{site.baseurl}}/api-reference/index-apis/close-index/) 操作关闭索引。关闭索引后，您将无法向其添加数据或搜索索引中的任何数据。

要关闭索引，请选择要关闭的索引**指数** 列表下**索引管理**。然后选择**动作** 按钮并选择**关闭** 从下拉列表中。

### 打开索引

这[打开索引]({{site.url}}{{site.baseurl}}/api-reference/index-apis/open-index/) 操作打开封闭索引，让您向其添加数据或在索引中搜索数据。

要打开索引，请选择要从**指数** 列表下**索引管理**。然后选择**动作** 按钮并选择**打开** 从下拉列表中。

### 重新索引索引

这[reindex]({{site.url}}{{site.baseurl}}/api-reference/document-apis/reindex/) 操作使您可以将所有数据或数据子从源索引复制到目标索引中。

要重新索引索引，请从**指数** 列表下**索引管理**。然后选择**动作** 按钮并选择**reindex** 从下拉列表中，如下图所示。

<img src="{{site.url}}{{site.baseurl}}/images/admin-ui-index/reindex-expanded.png" alt="User interface showing reindex prompt">

### 收缩索引

这[收缩]({{site.url}}{{site.baseurl}}/api-reference/index-apis/shrink-index/) 索引操作将现有索引中的所有数据复制为具有较少主要碎片的新索引。

要收缩索引，请选择要从**指数** 列表下**索引管理**。然后选择**动作** 按钮并选择**收缩** 从下拉列表中，如下图所示。

<img src="{{site.url}}{{site.baseurl}}/images/admin-ui-index/shrink.png" alt="User interface showing shrink prompt">

### 拆分索引

这[拆分索引]({{site.url}}{{site.baseurl}}/api-reference/index-apis/split/) 操作分解现有读取-仅将索引分为一个新索引，将每个主要碎片分成新索引中的许多主要碎片。

要拆分索引，请选择要从**指数** 列表下**索引管理**。然后选择**动作** 按钮并选择**分裂** 从下拉列表中，如下图所示。

<img src="{{site.url}}{{site.baseurl}}/images/admin-ui-index/split-expanded.png" alt="User interface showing split page">

### 刷新索引

刷新索引为搜索操作可见的索引提供了新的更新。

刷新操作只能应用于打开索引。

要刷新所有索引，请选择**刷新** 来自**动作** 下拉列表。

要刷新特定索引，请从**指数** 列表下**索引管理**。然后选择**刷新** 来自**动作** 下拉列表。

### 冲洗索引

冲洗操作执行了Lucene提交，为磁盘编写细分市场并启动了新的翻译。

冲洗操作只能应用于打开索引。

要冲洗所有索引，请选择**冲洗** 来自**动作** 下拉列表。

要冲洗特定索引，请从**指数** 列表下**索引管理**。然后选择**冲洗** 来自**动作** 下拉列表。

### 清除索引缓存

这[清除缓存操作]({{site.url}}{{site.baseurl}}/api-reference/index-apis/clear-index-cache/) 只能应用于打开索引。

要清除所有索引缓存，请选择**清除缓存** 来自**动作** 下拉列表。

要清除特定的索引缓存，请从**指数** 列表下**索引管理**。然后选择**清除缓存** 来自**动作** 下拉列表。

### 删除索引

如果您不再需要索引，则可以使用[删除索引]({{site.url}}{{site.baseurl}}/api-reference/index-apis/delete-index/) 删除它的操作。

要删除索引，请选择要从**指数** 列表下**索引管理**。然后选择**动作** 按钮并选择**删除** 从下拉列表中。

## 模板

[索引模板]({{site.url}}{{site.baseurl}}/opensearch/index-templates/) 让您用预定义的映射和设置初始化新索引。例如，如果您连续索引日志数据，则可以定义索引模板，以便所有索引具有与下图中所示的相同数量的碎片和副本。

<img src="{{site.url}}{{site.baseurl}}/images/admin-ui-index/templates.PNG" alt="User interface showing Templates page">

### 创建模板

要创建模板，请选择**创建模板** 按钮在**模板** 页面下**索引管理**。

接下来，定义模板：

1. 输入模板名称。
1. 选择模板类型。
1. 指定您要使用的任何索引模式。
1. 设置模板的优先级。
1. 选择一个索引别名。
1. 设置主碎片的数量。
1. 设置副本的数量。
1. 设置刷新间隔。
1. 使用Visual Editor或JSON编辑器添加索引映射的字段和对象。
1. 在下面**高级设置** 您可以使用逗号指定高级索引设置-划界列表如下图所示。

<img src="{{site.url}}{{site.baseurl}}/images/admin-ui-index/create-template-expanded.png" alt="User interface showing Create Template page">

### 编辑模板

要编辑模板，请选择要从模板列表中编辑的模板。接下来，选择**动作** 下拉列表并选择**编辑** 选项。

### 删除模板

要删除模板，请从模板列表中选择要删除要删除的模板。接下来，选择**动作** 下拉列表并选择**删除** 选项。

## 别名

别名是一个虚拟索引名称，可以指向一个或多个索引。如果您的数据分布在多个索引上，而不是跟踪要查询的索引，则可以创建一个别名并查询它，如下图所示。

<img src="{{site.url}}{{site.baseurl}}/images/admin-ui-index/aliases.PNG" alt="User interface showing Alias page">

### 创建一个别名

要创建一个别名，请执行以下步骤：

1. 选择**创建别名** 按钮在**别名** 页面下**索引管理**。
2. 指定别名名称。
3. 输入将包含在别名中的索引或索引模式。
4. 选择**创建别名** 如下图所示。

<img src="{{site.url}}{{site.baseurl}}/images/admin-ui-index/create-alias.PNG" alt="User interface showing create Alias page">

### 编辑别名

要编辑别名，请执行以下步骤：

1. 选择要编辑的别名。
2. 选择**动作** 按钮。
3. 选择**编辑** 从下拉列表中。

### 删除别名

要删除别名，请执行以下步骤：

1. 选择要编辑的别名。
2. 选择**动作** 按钮。
3. 选择**删除** 从下拉列表中。

### 刷新一个别名

刷新别名为搜索操作可见的索引提供了新的更新。

刷新操作只能应用于打开与指定别名相关的索引。

要刷新特定的别名，请从**别名** 列表下**索引管理**。然后选择**刷新** 来自**动作** 下拉列表。

### 冲洗别名

冲洗操作执行了Lucene提交，为磁盘编写细分市场并启动了新的翻译。

冲洗操作只能应用于打开与指定别名相关的索引。

要冲洗别名，请从**别名** 列表下**索引管理**。然后选择**冲洗** 来自**动作** 下拉列表。

### 清除别名缓存

这[清除缓存操作]({{site.url}}{{site.baseurl}}/api-reference/index-apis/clear-index-cache/) 只能应用于打开与指定别名相关的索引。

要清除别名缓存，请从**别名** 列表下**索引管理**。然后选择**清除缓存** 来自**动作** 下拉列表。

## 滚动工作

这**滚动工作** 部分**索引管理** 允许您创建或更新索引汇总作业。

要创建汇总作业，请执行以下步骤：

1. 选择**创建汇总作业** 按钮在**滚动工作** 页面下**索引管理**。
2. 设置名称，源索引和目标索引。
3. 选择**下一个**。
4. 设置时间戳字段和间隔类型。
5. 可选，设置其他聚合和指标。
6. 选择**下一个**。
7. 在下面**日程**，检查或取消选中**默认启用工作**。
8. 设置**连续的**，，，，**执行频率**，，，，**滚动间隔**， 和**每个执行页** 设置。
9. 此外，您可以设置执行延迟。
10. 选择**下一个**。
11. 查看汇总作业的设置，然后选择**创造**。

您还可以通过选择相应的按钮来启用和禁用汇总作业**滚动工作** 页。

## 改变工作

您可以使用[转换]({{site.url}}{{site.baseurl}}/im-plugin/index-transforms/transforms-apis/) 工作。

要创建转换作业，请执行以下步骤：

1. 选择**创建变换作业** 按钮在**改变工作** 页面下**索引管理**。
2. 设置名称，源索引和目标索引。
3. 选择**下一个**。
4. 选择要转换的字段。从表中，选择要通过选择要转换的字段**+** 字段名称旁边。
5. 选择**下一个**。
6. 检查或取消选中**默认启用作业**。
7. 设置转换执行间隔以及时间表是否连续。
8. 可选地，在**先进的** 下拉列表。
9. 选择**下一个**。
10. 查看汇总作业的设置，然后选择**创造**。

您还可以通过选择相应的按钮来启用和禁用汇总作业**改变工作** 页。

## 长的-运行操作状态检查

某些索引操作需要额外的时间来完成（通常超过30秒，但最多数十分钟或数小时）。这是在索引状态列中跟踪的**指数** 页。

您可以检查勒索，收缩和分裂操作的状态，因为它们是一个-时间，非-递归操作。

## 安全集成

  权限控制由现有[权限]({{site.url}}{{site.baseurl}}/security-plugin/access-control/permissions/) 或在API级别执行的动作组。目前没有UI-级别权限控制。有权访问ISM插件的用户可以查看新页面。如果他们有权运行相关的API，他们也可以进行更改。

## 错误处理

与API调用类似，如果操作立即失败，则会通过错误消息通知您。但是，如果这很长-运行操作，您将在失败时通知您的故障，或者您可以检查索引状态**指数** 页。
 
